   1              		.syntax unified
   2              		.cpu cortex-m4
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 6
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.thumb
  14              		.file	"PeakingComb.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.text.InitPeakingComb,"ax",%progbits
  19              		.align	2
  20              		.global	InitPeakingComb
  21              		.thumb
  22              		.thumb_func
  24              	InitPeakingComb:
  25              	.LFB128:
  26              		.file 1 "../Sources/DSP/PeakingComb.c"
   1:../Sources/DSP/PeakingComb.c **** 
   2:../Sources/DSP/PeakingComb.c **** #include "derivative.h" /* include peripheral declarations */
   3:../Sources/DSP/PeakingComb.c **** #include "arm_math.h"
   4:../Sources/DSP/PeakingComb.c **** #include "PeakingComb.h"
   5:../Sources/DSP/PeakingComb.c **** 
   6:../Sources/DSP/PeakingComb.c **** void InitPeakingComb(PeakingComb *PC,q31_t *History,int16_t HistoryLength, uint8_t Type)
   7:../Sources/DSP/PeakingComb.c **** {
  27              		.loc 1 7 0
  28              		.cfi_startproc
  29              		@ args = 0, pretend = 0, frame = 24
  30              		@ frame_needed = 1, uses_anonymous_args = 0
  31              		@ link register save eliminated.
  32 0000 80B4     		push	{r7}
  33              	.LCFI0:
  34              		.cfi_def_cfa_offset 4
  35              		.cfi_offset 7, -4
  36 0002 87B0     		sub	sp, sp, #28
  37              	.LCFI1:
  38              		.cfi_def_cfa_offset 32
  39 0004 00AF     		add	r7, sp, #0
  40              	.LCFI2:
  41              		.cfi_def_cfa_register 7
  42 0006 F860     		str	r0, [r7, #12]
  43 0008 B960     		str	r1, [r7, #8]
  44 000a FA80     		strh	r2, [r7, #6]	@ movhi
  45 000c 7B71     		strb	r3, [r7, #5]
   8:../Sources/DSP/PeakingComb.c ****     uint32_t i;
   9:../Sources/DSP/PeakingComb.c ****     PC->OutputHistory = History;
  46              		.loc 1 9 0
  47 000e FB68     		ldr	r3, [r7, #12]
  48 0010 BA68     		ldr	r2, [r7, #8]
  49 0012 1A60     		str	r2, [r3, #0]
  10:../Sources/DSP/PeakingComb.c ****     PC->HistoryLength = HistoryLength;
  50              		.loc 1 10 0
  51 0014 FB68     		ldr	r3, [r7, #12]
  52 0016 FA88     		ldrh	r2, [r7, #6]	@ movhi
  53 0018 9A81     		strh	r2, [r3, #12]	@ movhi
  11:../Sources/DSP/PeakingComb.c ****     PC->PreviousInput = 0;
  54              		.loc 1 11 0
  55 001a FB68     		ldr	r3, [r7, #12]
  56 001c 4FF00002 		mov	r2, #0
  57 0020 9A60     		str	r2, [r3, #8]
  12:../Sources/DSP/PeakingComb.c ****     PC->CurrentIndex = 0;
  58              		.loc 1 12 0
  59 0022 FB68     		ldr	r3, [r7, #12]
  60 0024 4FF00002 		mov	r2, #0
  61 0028 DA81     		strh	r2, [r3, #14]	@ movhi
  13:../Sources/DSP/PeakingComb.c **** 
  14:../Sources/DSP/PeakingComb.c ****     for(i=0; i<HistoryLength; i++)
  62              		.loc 1 14 0
  63 002a 4FF00003 		mov	r3, #0
  64 002e 7B61     		str	r3, [r7, #20]
  65 0030 0CE0     		b	.L2
  66              	.L3:
  15:../Sources/DSP/PeakingComb.c ****         {
  16:../Sources/DSP/PeakingComb.c ****             PC->OutputHistory[i] = 0;
  67              		.loc 1 16 0
  68 0032 FB68     		ldr	r3, [r7, #12]
  69 0034 1A68     		ldr	r2, [r3, #0]
  70 0036 7B69     		ldr	r3, [r7, #20]
  71 0038 4FEA8303 		lsl	r3, r3, #2
  72 003c D318     		adds	r3, r2, r3
  73 003e 4FF00002 		mov	r2, #0
  74 0042 1A60     		str	r2, [r3, #0]
  14:../Sources/DSP/PeakingComb.c ****     for(i=0; i<HistoryLength; i++)
  75              		.loc 1 14 0
  76 0044 7B69     		ldr	r3, [r7, #20]
  77 0046 03F10103 		add	r3, r3, #1
  78 004a 7B61     		str	r3, [r7, #20]
  79              	.L2:
  14:../Sources/DSP/PeakingComb.c ****     for(i=0; i<HistoryLength; i++)
  80              		.loc 1 14 0 is_stmt 0
  81 004c B7F90620 		ldrsh	r2, [r7, #6]
  82 0050 7B69     		ldr	r3, [r7, #20]
  83 0052 9A42     		cmp	r2, r3
  84 0054 EDD8     		bhi	.L3
  17:../Sources/DSP/PeakingComb.c ****         }
  18:../Sources/DSP/PeakingComb.c **** 
  19:../Sources/DSP/PeakingComb.c ****     PC->FeedbackTap = -1;
  85              		.loc 1 19 0 is_stmt 1
  86 0056 FB68     		ldr	r3, [r7, #12]
  87 0058 4FF6FF72 		movw	r2, #65535
  88 005c 1A82     		strh	r2, [r3, #16]	@ movhi
  20:../Sources/DSP/PeakingComb.c ****     PC->FeedbackAmplitude = 0;
  89              		.loc 1 20 0
  90 005e FB68     		ldr	r3, [r7, #12]
  91 0060 4FF00002 		mov	r2, #0
  92 0064 5A60     		str	r2, [r3, #4]
  21:../Sources/DSP/PeakingComb.c ****     PC->CombType = Type;
  93              		.loc 1 21 0
  94 0066 FB68     		ldr	r3, [r7, #12]
  95 0068 7A79     		ldrb	r2, [r7, #5]
  96 006a 9A74     		strb	r2, [r3, #18]
  22:../Sources/DSP/PeakingComb.c **** }
  97              		.loc 1 22 0
  98 006c 07F11C07 		add	r7, r7, #28
  99 0070 BD46     		mov	sp, r7
 100 0072 80BC     		pop	{r7}
 101 0074 7047     		bx	lr
 102              		.cfi_endproc
 103              	.LFE128:
 105 0076 00BF     		.section	.text.CombTheDesert,"ax",%progbits
 106              		.align	2
 107              		.global	CombTheDesert
 108              		.thumb
 109              		.thumb_func
 111              	CombTheDesert:
 112              	.LFB129:
  23:../Sources/DSP/PeakingComb.c **** 
  24:../Sources/DSP/PeakingComb.c **** void CombTheDesert(q31_t In, q31_t *Out,PeakingComb *PC)
  25:../Sources/DSP/PeakingComb.c **** {
 113              		.loc 1 25 0
 114              		.cfi_startproc
 115              		@ args = 0, pretend = 0, frame = 32
 116              		@ frame_needed = 1, uses_anonymous_args = 0
 117              		@ link register save eliminated.
 118 0000 2DE9F003 		push	{r4, r5, r6, r7, r8, r9}
 119              	.LCFI3:
 120              		.cfi_def_cfa_offset 24
 121              		.cfi_offset 4, -24
 122              		.cfi_offset 5, -20
 123              		.cfi_offset 6, -16
 124              		.cfi_offset 7, -12
 125              		.cfi_offset 8, -8
 126              		.cfi_offset 9, -4
 127 0004 88B0     		sub	sp, sp, #32
 128              	.LCFI4:
 129              		.cfi_def_cfa_offset 56
 130 0006 00AF     		add	r7, sp, #0
 131              	.LCFI5:
 132              		.cfi_def_cfa_register 7
 133 0008 F860     		str	r0, [r7, #12]
 134 000a B960     		str	r1, [r7, #8]
 135 000c 7A60     		str	r2, [r7, #4]
  26:../Sources/DSP/PeakingComb.c ****     int16_t Idx =0;
 136              		.loc 1 26 0
 137 000e 4FF00003 		mov	r3, #0
 138 0012 FB83     		strh	r3, [r7, #30]	@ movhi
  27:../Sources/DSP/PeakingComb.c ****     q63_t Acc = 0;
 139              		.loc 1 27 0
 140 0014 4FF00002 		mov	r2, #0
 141 0018 4FF00003 		mov	r3, #0
 142 001c C7E90423 		strd	r2, [r7, #16]
  28:../Sources/DSP/PeakingComb.c ****     //get the feedback Value;
  29:../Sources/DSP/PeakingComb.c ****     Idx = PC->CurrentIndex + PC->FeedbackTap;
 143              		.loc 1 29 0
 144 0020 7B68     		ldr	r3, [r7, #4]
 145 0022 DB89     		ldrh	r3, [r3, #14]
 146 0024 9AB2     		uxth	r2, r3
 147 0026 7B68     		ldr	r3, [r7, #4]
 148 0028 1B8A     		ldrh	r3, [r3, #16]
 149 002a 9BB2     		uxth	r3, r3
 150 002c D318     		adds	r3, r2, r3
 151 002e 9BB2     		uxth	r3, r3
 152 0030 FB83     		strh	r3, [r7, #30]	@ movhi
  30:../Sources/DSP/PeakingComb.c **** 
  31:../Sources/DSP/PeakingComb.c ****     if(Idx<0)
 153              		.loc 1 31 0
 154 0032 B7F91E30 		ldrsh	r3, [r7, #30]
 155 0036 002B     		cmp	r3, #0
 156 0038 06DA     		bge	.L5
  32:../Sources/DSP/PeakingComb.c ****         {
  33:../Sources/DSP/PeakingComb.c ****             Idx += PC->HistoryLength;
 157              		.loc 1 33 0
 158 003a 7B68     		ldr	r3, [r7, #4]
 159 003c 9B89     		ldrh	r3, [r3, #12]
 160 003e 9AB2     		uxth	r2, r3
 161 0040 FB8B     		ldrh	r3, [r7, #30]
 162 0042 D318     		adds	r3, r2, r3
 163 0044 9BB2     		uxth	r3, r3
 164 0046 FB83     		strh	r3, [r7, #30]	@ movhi
 165              	.L5:
  34:../Sources/DSP/PeakingComb.c ****         }
  35:../Sources/DSP/PeakingComb.c **** 
  36:../Sources/DSP/PeakingComb.c ****     if(PC->CombType == COMB_TYPE_PEAKING)
 166              		.loc 1 36 0
 167 0048 7B68     		ldr	r3, [r7, #4]
 168 004a 9B7C     		ldrb	r3, [r3, #18]	@ zero_extendqisi2
 169 004c 012B     		cmp	r3, #1
 170 004e 57D1     		bne	.L6
  37:../Sources/DSP/PeakingComb.c ****         {
  38:../Sources/DSP/PeakingComb.c ****             // Compute the Feedforward part.  Simple 2 element LPF
  39:../Sources/DSP/PeakingComb.c ****             Acc += In;// + PC->PreviousInput;
 171              		.loc 1 39 0
 172 0050 F968     		ldr	r1, [r7, #12]
 173 0052 0A46     		mov	r2, r1
 174 0054 4FEAE273 		asr	r3, r2, #31
 175 0058 D7E90401 		ldrd	r0, [r7, #16]
 176 005c 1218     		adds	r2, r2, r0
 177 005e 43EB0103 		adc	r3, r3, r1
 178 0062 C7E90423 		strd	r2, [r7, #16]
  40:../Sources/DSP/PeakingComb.c ****             //	Acc >>= 1;
  41:../Sources/DSP/PeakingComb.c ****             //Compute the Feedback  part
  42:../Sources/DSP/PeakingComb.c ****             Acc += ((q63_t)PC->OutputHistory[Idx]  * PC->FeedbackAmplitude)>>31;
 179              		.loc 1 42 0
 180 0066 7B68     		ldr	r3, [r7, #4]
 181 0068 1A68     		ldr	r2, [r3, #0]
 182 006a B7F91E30 		ldrsh	r3, [r7, #30]
 183 006e 4FEA8303 		lsl	r3, r3, #2
 184 0072 D318     		adds	r3, r2, r3
 185 0074 1B68     		ldr	r3, [r3, #0]
 186 0076 1846     		mov	r0, r3
 187 0078 4FEAE071 		asr	r1, r0, #31
 188 007c 7B68     		ldr	r3, [r7, #4]
 189 007e 5C68     		ldr	r4, [r3, #4]
 190 0080 2246     		mov	r2, r4
 191 0082 4FEAE273 		asr	r3, r2, #31
 192 0086 02FB01F5 		mul	r5, r2, r1
 193 008a 00FB03F4 		mul	r4, r0, r3
 194 008e 2C19     		adds	r4, r5, r4
 195 0090 A0FB0223 		umull	r2, r3, r0, r2
 196 0094 E118     		adds	r1, r4, r3
 197 0096 0B46     		mov	r3, r1
 198 0098 4FEA4301 		lsl	r1, r3, #1
 199 009c 4FEAD278 		lsr	r8, r2, #31
 200 00a0 41EA0808 		orr	r8, r1, r8
 201 00a4 4FEAE379 		asr	r9, r3, #31
 202 00a8 D7E90423 		ldrd	r2, [r7, #16]
 203 00ac 12EB0802 		adds	r2, r2, r8
 204 00b0 43EB0903 		adc	r3, r3, r9
 205 00b4 C7E90423 		strd	r2, [r7, #16]
  43:../Sources/DSP/PeakingComb.c ****             PC->OutputHistory[PC->CurrentIndex] = (q31_t)Acc;
 206              		.loc 1 43 0
 207 00b8 7B68     		ldr	r3, [r7, #4]
 208 00ba 1A68     		ldr	r2, [r3, #0]
 209 00bc 7B68     		ldr	r3, [r7, #4]
 210 00be DB89     		ldrh	r3, [r3, #14]
 211 00c0 1BB2     		sxth	r3, r3
 212 00c2 4FEA8303 		lsl	r3, r3, #2
 213 00c6 D318     		adds	r3, r2, r3
 214 00c8 3A69     		ldr	r2, [r7, #16]
 215 00ca 1A60     		str	r2, [r3, #0]
  44:../Sources/DSP/PeakingComb.c ****             *Out = (q31_t)Acc;
 216              		.loc 1 44 0
 217 00cc 3A69     		ldr	r2, [r7, #16]
 218 00ce BB68     		ldr	r3, [r7, #8]
 219 00d0 1A60     		str	r2, [r3, #0]
  45:../Sources/DSP/PeakingComb.c ****             PC->CurrentIndex++;
 220              		.loc 1 45 0
 221 00d2 7B68     		ldr	r3, [r7, #4]
 222 00d4 DB89     		ldrh	r3, [r3, #14]
 223 00d6 03F10103 		add	r3, r3, #1
 224 00da 9AB2     		uxth	r2, r3
 225 00dc 7B68     		ldr	r3, [r7, #4]
 226 00de DA81     		strh	r2, [r3, #14]	@ movhi
  46:../Sources/DSP/PeakingComb.c **** 
  47:../Sources/DSP/PeakingComb.c ****             if(PC->CurrentIndex == PC->HistoryLength)
 227              		.loc 1 47 0
 228 00e0 7B68     		ldr	r3, [r7, #4]
 229 00e2 DA89     		ldrh	r2, [r3, #14]
 230 00e4 7B68     		ldr	r3, [r7, #4]
 231 00e6 9B89     		ldrh	r3, [r3, #12]
 232 00e8 12B2     		sxth	r2, r2
 233 00ea 1BB2     		sxth	r3, r3
 234 00ec 9A42     		cmp	r2, r3
 235 00ee 03D1     		bne	.L7
  48:../Sources/DSP/PeakingComb.c ****                 PC->CurrentIndex = 0;
 236              		.loc 1 48 0
 237 00f0 7B68     		ldr	r3, [r7, #4]
 238 00f2 4FF00002 		mov	r2, #0
 239 00f6 DA81     		strh	r2, [r3, #14]	@ movhi
 240              	.L7:
  49:../Sources/DSP/PeakingComb.c **** 
  50:../Sources/DSP/PeakingComb.c ****             PC->PreviousInput = In;
 241              		.loc 1 50 0
 242 00f8 7B68     		ldr	r3, [r7, #4]
 243 00fa FA68     		ldr	r2, [r7, #12]
 244 00fc 9A60     		str	r2, [r3, #8]
 245 00fe 54E0     		b	.L4
 246              	.L6:
  51:../Sources/DSP/PeakingComb.c ****         }
  52:../Sources/DSP/PeakingComb.c ****     else
  53:../Sources/DSP/PeakingComb.c ****         {
  54:../Sources/DSP/PeakingComb.c ****             Acc += In;
 247              		.loc 1 54 0
 248 0100 F968     		ldr	r1, [r7, #12]
 249 0102 0A46     		mov	r2, r1
 250 0104 4FEAE273 		asr	r3, r2, #31
 251 0108 D7E90401 		ldrd	r0, [r7, #16]
 252 010c 1218     		adds	r2, r2, r0
 253 010e 43EB0103 		adc	r3, r3, r1
 254 0112 C7E90423 		strd	r2, [r7, #16]
  55:../Sources/DSP/PeakingComb.c ****             Acc += ((q63_t)PC->OutputHistory[Idx]  * PC->FeedbackAmplitude)>>31;
 255              		.loc 1 55 0
 256 0116 7B68     		ldr	r3, [r7, #4]
 257 0118 1A68     		ldr	r2, [r3, #0]
 258 011a B7F91E30 		ldrsh	r3, [r7, #30]
 259 011e 4FEA8303 		lsl	r3, r3, #2
 260 0122 D318     		adds	r3, r2, r3
 261 0124 1B68     		ldr	r3, [r3, #0]
 262 0126 1846     		mov	r0, r3
 263 0128 4FEAE071 		asr	r1, r0, #31
 264 012c 7B68     		ldr	r3, [r7, #4]
 265 012e 5E68     		ldr	r6, [r3, #4]
 266 0130 3246     		mov	r2, r6
 267 0132 4FEAE273 		asr	r3, r2, #31
 268 0136 02FB01FC 		mul	ip, r2, r1
 269 013a 00FB03F6 		mul	r6, r0, r3
 270 013e 6644     		add	r6, ip, r6
 271 0140 A0FB0223 		umull	r2, r3, r0, r2
 272 0144 F118     		adds	r1, r6, r3
 273 0146 0B46     		mov	r3, r1
 274 0148 4FEA4301 		lsl	r1, r3, #1
 275 014c 4FEAD274 		lsr	r4, r2, #31
 276 0150 0C43     		orrs	r4, r4, r1
 277 0152 4FEAE375 		asr	r5, r3, #31
 278 0156 D7E90423 		ldrd	r2, [r7, #16]
 279 015a 1219     		adds	r2, r2, r4
 280 015c 43EB0503 		adc	r3, r3, r5
 281 0160 C7E90423 		strd	r2, [r7, #16]
  56:../Sources/DSP/PeakingComb.c ****             PC->OutputHistory[PC->CurrentIndex] = (q31_t)In;
 282              		.loc 1 56 0
 283 0164 7B68     		ldr	r3, [r7, #4]
 284 0166 1A68     		ldr	r2, [r3, #0]
 285 0168 7B68     		ldr	r3, [r7, #4]
 286 016a DB89     		ldrh	r3, [r3, #14]
 287 016c 1BB2     		sxth	r3, r3
 288 016e 4FEA8303 		lsl	r3, r3, #2
 289 0172 D318     		adds	r3, r2, r3
 290 0174 FA68     		ldr	r2, [r7, #12]
 291 0176 1A60     		str	r2, [r3, #0]
  57:../Sources/DSP/PeakingComb.c ****             *Out = (q31_t)Acc;
 292              		.loc 1 57 0
 293 0178 3A69     		ldr	r2, [r7, #16]
 294 017a BB68     		ldr	r3, [r7, #8]
 295 017c 1A60     		str	r2, [r3, #0]
  58:../Sources/DSP/PeakingComb.c ****             PC->CurrentIndex++;
 296              		.loc 1 58 0
 297 017e 7B68     		ldr	r3, [r7, #4]
 298 0180 DB89     		ldrh	r3, [r3, #14]
 299 0182 03F10103 		add	r3, r3, #1
 300 0186 9AB2     		uxth	r2, r3
 301 0188 7B68     		ldr	r3, [r7, #4]
 302 018a DA81     		strh	r2, [r3, #14]	@ movhi
  59:../Sources/DSP/PeakingComb.c **** 
  60:../Sources/DSP/PeakingComb.c ****             if(PC->CurrentIndex == PC->HistoryLength)
 303              		.loc 1 60 0
 304 018c 7B68     		ldr	r3, [r7, #4]
 305 018e DA89     		ldrh	r2, [r3, #14]
 306 0190 7B68     		ldr	r3, [r7, #4]
 307 0192 9B89     		ldrh	r3, [r3, #12]
 308 0194 12B2     		sxth	r2, r2
 309 0196 1BB2     		sxth	r3, r3
 310 0198 9A42     		cmp	r2, r3
 311 019a 03D1     		bne	.L9
  61:../Sources/DSP/PeakingComb.c ****                 PC->CurrentIndex = 0;
 312              		.loc 1 61 0
 313 019c 7B68     		ldr	r3, [r7, #4]
 314 019e 4FF00002 		mov	r2, #0
 315 01a2 DA81     		strh	r2, [r3, #14]	@ movhi
 316              	.L9:
  62:../Sources/DSP/PeakingComb.c **** 
  63:../Sources/DSP/PeakingComb.c ****             PC->PreviousInput = In;
 317              		.loc 1 63 0
 318 01a4 7B68     		ldr	r3, [r7, #4]
 319 01a6 FA68     		ldr	r2, [r7, #12]
 320 01a8 9A60     		str	r2, [r3, #8]
 321              	.L4:
  64:../Sources/DSP/PeakingComb.c ****         }
  65:../Sources/DSP/PeakingComb.c **** }
 322              		.loc 1 65 0
 323 01aa 07F12007 		add	r7, r7, #32
 324 01ae BD46     		mov	sp, r7
 325 01b0 BDE8F003 		pop	{r4, r5, r6, r7, r8, r9}
 326 01b4 7047     		bx	lr
 327              		.cfi_endproc
 328              	.LFE129:
 330 01b6 00BF     		.text
 331              	.Letext0:
 332              		.file 2 "C:/Freescale/CW MCU v10.5/MCU/ARM_GCC_Support/ewl/EWL_C/include/cstdint"
 333              		.file 3 "C:/Users/ehughes/Dropbox/FRDM/FRDM-JAM/SRC/CMSIS_DSP_3.2/Sources/Include/arm_math.h"
 334              		.file 4 "../Sources/DSP/PeakingComb.h"
DEFINED SYMBOLS
                            *ABS*:00000000 PeakingComb.c
C:\Users\ehughes\AppData\Local\Temp\cceVbffl.s:19     .text.InitPeakingComb:00000000 $t
C:\Users\ehughes\AppData\Local\Temp\cceVbffl.s:24     .text.InitPeakingComb:00000000 InitPeakingComb
C:\Users\ehughes\AppData\Local\Temp\cceVbffl.s:106    .text.CombTheDesert:00000000 $t
C:\Users\ehughes\AppData\Local\Temp\cceVbffl.s:111    .text.CombTheDesert:00000000 CombTheDesert
                     .debug_frame:00000010 $d

NO UNDEFINED SYMBOLS
